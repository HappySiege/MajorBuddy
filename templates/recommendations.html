{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <h2 class="mb-4 text-center accent-text">Your Major Recommendations</h2>
        
        {% if error %}
        <div class="alert alert-warning">{{ error }}</div>
        {% endif %}

        {% if personality_type and recommendations %}
        <div class="card mb-4">
            <div class="card-header">
                <h3>Your Personality Type: {{ personality_type.code }}</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h4>Dimension Scores:</h4>
                        <ul>
                            <li>Extraversion-Introversion: {{ "%.1f"|format(personality_type.scores.ei * 100) }}%</li>
                            <li>Sensing-Intuition: {{ "%.1f"|format(personality_type.scores.sn * 100) }}%</li>
                            <li>Thinking-Feeling: {{ "%.1f"|format(personality_type.scores.tf * 100) }}%</li>
                            <li>Judging-Perceiving: {{ "%.1f"|format(personality_type.scores.jp * 100) }}%</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <h3 class="mb-3">Your Recommended Majors</h3>
        {% for rec in recommendations %}
        <div class="card mb-3">
            <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">{{ rec.major.name }}</h4>
                    <span class="badge bg-primary">{{ rec.match_score }}% Match</span>
                </div>
            </div>
            <div class="card-body">
                <p><strong>Description:</strong> {{ rec.major.description }}</p>
                <p><strong>Career Opportunities:</strong> {{ rec.major.career_opportunities }}</p>
                <p><strong>Required Skills:</strong> {{ rec.major.required_skills }}</p>
                
                <h5>Match Breakdown:</h5>
                <div class="row">
                    <div class="col-md-3">
                        <div class="progress mb-2">
                            <div class="progress-bar" 
                                 role="progressbar" 
                                 style="width: {{ rec.analytical_match }}%"
                                 aria-valuenow="{{ rec.analytical_match }}" 
                                 aria-valuemin="0" 
                                 aria-valuemax="100">
                                {{ rec.analytical_match }}%
                            </div>
                        </div>
                        <small>Analytical</small>
                    </div>
                    <div class="col-md-3">
                        <div class="progress mb-2">
                            <div class="progress-bar" 
                                 role="progressbar" 
                                 style="width: {{ rec.creative_match }}%"
                                 aria-valuenow="{{ rec.creative_match }}" 
                                 aria-valuemin="0" 
                                 aria-valuemax="100">
                                {{ rec.creative_match }}%
                            </div>
                        </div>
                        <small>Creative</small>
                    </div>
                    <div class="col-md-3">
                        <div class="progress mb-2">
                            <div class="progress-bar" 
                                 role="progressbar" 
                                 style="width: {{ rec.social_match }}%"
                                 aria-valuenow="{{ rec.social_match }}" 
                                 aria-valuemin="0" 
                                 aria-valuemax="100">
                                {{ rec.social_match }}%
                            </div>
                        </div>
                        <small>Social</small>
                    </div>
                    <div class="col-md-3">
                        <div class="progress mb-2">
                            <div class="progress-bar" 
                                 role="progressbar" 
                                 style="width: {{ rec.technical_match }}%"
                                 aria-valuenow="{{ rec.technical_match }}" 
                                 aria-valuemin="0" 
                                 aria-valuemax="100">
                                {{ rec.technical_match }}%
                            </div>
                        </div>
                        <small>Technical</small>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
        {% endif %}

        <div class="text-center mt-4">
            <a href="/questionnaire" class="btn btn-primary">Take Questionnaire Again</a>
        </div>
    </div>
</div>
{% endblock %}
